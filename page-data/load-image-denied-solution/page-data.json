{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/load-image-denied-solution/","result":{"data":{"site":{"siteMetadata":{"title":"学习随笔"}},"markdownRemark":{"id":"3e79b8d5-97ed-5146-ad85-ea7766c4b2fc","excerpt":"前言 最近笔者利用休息时间仿了一波微博热搜页面，简单来讲就是在服务端利用 cheerio 解析页面 html，提取热搜标题，并根据标题展开每个热搜的详细内容。  文字内容可以很简单的提取，但是热搜中出现的图片想要直接拿来显示并非易事。 遇到问题 图片的 src…","html":"<h3>前言</h3>\n<p>最近笔者利用休息时间仿了一波<a href=\"https://keisei.now.sh/weibo\">微博热搜</a>页面，简单来讲就是在<a href=\"https://github.com/keisei77/micro-backend/blob/master/route/weibo.js\">服务端</a>利用 <a href=\"https://cheerio.js.org/\">cheerio</a> 解析页面 html，提取热搜标题，并根据标题展开每个热搜的详细内容。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e53db35c452c52ea128c557d642ec5dc/3298e/weibo-topic.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 135.01400560224087%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/UlEQVRIx5WUi26DMAxF+f9/3LR2tF3LKG/yHJ4vwRVrgYVKLlJIDtf2dZLB9jS0GQ26IapS6tUPFaUl/IZhiA7ejQOUdL2msmypqnsqi5rulaHsrqluDSltSZm46HWIpOocHa+WTpmlzxvH1dDpZijlaLWj3nKY7VC8p1GOOt6f4E8A17ulW2Hp8m3o+GVGeDjgWYUPz+eY1lsB1r0bD3/lAQjwmYGA4qvY/L/CGRCHPs56hCH9snWPp2x+qFyIF2DHC+fM0L22pJ0nzS/Hp/t7YA36ADIMrKThlFErQPEF/ZTifoX8h0aghoiU4XW3XLsl+GsNWaHA0G2oxQvj19PfBCL3BzALqZeNHZsCB0AtmoR9UQqxkE7KRlNnIe3DJVgHH8Ba0YSm/QuEAgCDmTV9V5b84Mn9eLJTmD0po4YAQoWohCqUAAaXEZw3aVvhNCkCQxwvegRh/f2kKWePRgNFoYyeKEUJpFFZGQEUY4+3DSu55mGO0RDUEms9D771frEZ67ZRAQhFUDI/uGTqqJTF0AA/3zDKukXQJhC1y3j8oLDT69aIAqLLSBeLc7/FXhCLl0POZoZVxH+YEjQHylu1E4ia4aAEallMlys27FaIlGVekTpGr1vpZLTCSx66jHtxyzK7buy3NFwMcxNvKdtUeOCGiLEbFQ9bAv4C5VQyaNQTlNAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"weibo topic\"\n        title=\"weibo topic\"\n        src=\"/static/e53db35c452c52ea128c557d642ec5dc/799d3/weibo-topic.png\"\n        srcset=\"/static/e53db35c452c52ea128c557d642ec5dc/00d96/weibo-topic.png 148w,\n/static/e53db35c452c52ea128c557d642ec5dc/0b23c/weibo-topic.png 295w,\n/static/e53db35c452c52ea128c557d642ec5dc/799d3/weibo-topic.png 590w,\n/static/e53db35c452c52ea128c557d642ec5dc/3298e/weibo-topic.png 714w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>文字内容可以很简单的提取，但是热搜中出现的图片想要直接拿来显示并非易事。</p>\n<h3>遇到问题</h3>\n<p>图片的 src 直接可以通过解析提取，如果直接拿来在我们的域名上显示会出现一个奇怪的问题：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ceb333806c254bf16ba3ef67d3d09a93/c2188/image-blocked.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28750653423941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABx0lEQVQoz02S13KsMBBE+f+/c9ll+8W76zWXjFAOpL4tWIeHrgGhOROawmgDaxzSsmBZ/2hbMYkRfddhGHpUVYm2qVHVNdq2Qdc16PsWI7+N4wApBQRjMcqIstL8qNB9q5OYlEc/CCYMLGiglIJhDN4fz0PfI4RwnGm+e54751E4F0hW7MYwagIUq1ms286ooG83hKpCZGIiYKYSAZGdRkJysag15pROoNSO1XL1XCGy6nwopQXWOtjLBfHzE4lJGZgIidOE+PWF6NwJZIE5xhOoHkCl3A/UmnBAD+D1iliWSNYesB9g7poFHM+jlL9ArT0Ex/UEORu4i0TQd3Rw1wsSgXMGPkae2VHiyPndP4ALRzbGovAhHV3FOCOmU4Fn87JC80JX/oOk04pJ2YBJGe5ZQLXtYYbMZnEdluC882KiAU0t0LWSmng5Oy55gR0T2NcNBJ1WdNUKAUN5wgMBIe+PUfFsaHiPhQtjwukulXeZx+/524iJI4oJ09sbytdXlC8vuD8/o2bcmQzukUnYqfr9HbenJwwfH9wh95V3tiwbtWKel1PrRvc01P2Oji53/H0aGjTyecswdrazw53jjnS85t+gaNR/i4j7VBwMC1IAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image blocked\"\n        title=\"image blocked\"\n        src=\"/static/ceb333806c254bf16ba3ef67d3d09a93/799d3/image-blocked.png\"\n        srcset=\"/static/ceb333806c254bf16ba3ef67d3d09a93/00d96/image-blocked.png 148w,\n/static/ceb333806c254bf16ba3ef67d3d09a93/0b23c/image-blocked.png 295w,\n/static/ceb333806c254bf16ba3ef67d3d09a93/799d3/image-blocked.png 590w,\n/static/ceb333806c254bf16ba3ef67d3d09a93/2a3d6/image-blocked.png 885w,\n/static/ceb333806c254bf16ba3ef67d3d09a93/ae92f/image-blocked.png 1180w,\n/static/ceb333806c254bf16ba3ef67d3d09a93/c2188/image-blocked.png 1913w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>所有的图片都没有显示。</p>\n<p>具体来看图片的请求：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e39d79ea8487d7f7851c935cab76c9ef/77ac2/blocked-reason.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.48406546080965%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdElEQVQoz5VTi46CMBDk/z/QGBQUQcr7TaEYmZtFMfHO87wmk20WOp3d2VpZlkH3PfquQ57n8H0f9v6IUKllfz6fEQTBEuM4hmI+DEPIOfn/O6yUH7KyRDcM0OOIoiiw3zsLmRAIkiR5REGapih5pq7rH7C8nY14s0G03ULtdmj4YxQp5CQYeEnbtkuUNc/zA78tKzq40LaNznHQs5S2qpBTZcUoRMYYXK/XJ7J3sJKTh+l4xOh5MFSlqUj6J72Ssnr2d1X0TtlDYcmD4+GAgYTjnVAaXlOhmKW1fiL8U2FKhcZ1b4RsuG4axGx6QcLpcnm6ff6A1CpUeFNIjFG0ECa8ICVa9lQzd6H7i8pPSk79E4xzV8hSe1qvzgHiUKGmOdKCgWWLOR+VHNMQ41KhGMOSu7pClqdoSCSGTNOE/6zFFMORMVQ40JQqyzmgDToSdnw96xyOLFviul+x5tYRszIh4bMq+DIKRpnDV47KLK54lVvzXym1ngNpGFhzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"blocked reason\"\n        title=\"blocked reason\"\n        src=\"/static/e39d79ea8487d7f7851c935cab76c9ef/799d3/blocked-reason.png\"\n        srcset=\"/static/e39d79ea8487d7f7851c935cab76c9ef/00d96/blocked-reason.png 148w,\n/static/e39d79ea8487d7f7851c935cab76c9ef/0b23c/blocked-reason.png 295w,\n/static/e39d79ea8487d7f7851c935cab76c9ef/799d3/blocked-reason.png 590w,\n/static/e39d79ea8487d7f7851c935cab76c9ef/2a3d6/blocked-reason.png 885w,\n/static/e39d79ea8487d7f7851c935cab76c9ef/77ac2/blocked-reason.png 1161w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>结果发现 403 被禁用，response header 中有一个 <code class=\"language-text\">x-tengine-error: denied by Referer ACL</code>，经过<a href=\"https://blog.csdn.net/johnny_mu/article/details/105166878\">网上的搜索发现</a>应该是微博为了图片不被他人使用做了防盗链的校验，但是这个措施只是相当于校验了白名单中的 referer。那么我们有没有可能为图片的请求加上 referer 这个 header 呢？</p>\n<h3>解决方案</h3>\n<p>由于使用了免费的后端服务，所以我们没办法添加 nginx 做反向代理。但我们还可以通过服务器来劫持对图片发起的请求：</p>\n<p>我们指定图片的 src 是一串我们自己服务器的请求，把图片真实的地址和 referer 地址通过 query 的方式带入：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">&lt;img src={`${MyAPI}?src=${src}&amp;referer=${referer}`} alt=\"media image\" /></code></pre></div>\n<p>在服务器端我们解析 query 并通过 req.pipe 来还原真实请求结果：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> request <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'request'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">weiboAssetsHandler</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> src<span class=\"token punctuation\">,</span> referer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">:</span> src<span class=\"token punctuation\">,</span>\n      headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        Referer<span class=\"token punctuation\">:</span> <span class=\"token function\">encodeURI</span><span class=\"token punctuation\">(</span>referer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    req<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      error<span class=\"token punctuation\">:</span> error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/assets'</span><span class=\"token punctuation\">,</span> weiboAssetsHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>通过这番操作，我们再来看请求：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55a700cc419dc109c5ed363f78faf0eb/bb3cf/image-with-proxy.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 142.61119081779051%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image with proxy\"\n        title=\"image with proxy\"\n        src=\"/static/55a700cc419dc109c5ed363f78faf0eb/799d3/image-with-proxy.png\"\n        srcset=\"/static/55a700cc419dc109c5ed363f78faf0eb/00d96/image-with-proxy.png 148w,\n/static/55a700cc419dc109c5ed363f78faf0eb/0b23c/image-with-proxy.png 295w,\n/static/55a700cc419dc109c5ed363f78faf0eb/799d3/image-with-proxy.png 590w,\n/static/55a700cc419dc109c5ed363f78faf0eb/bb3cf/image-with-proxy.png 697w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>可以看到，图片真实的出现在了我们自己的网站。</p>\n<p>再看一下我们的请求已经可以成功返回 200：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dc6e1336047dfeca3345162f3137de07/30a34/success-response.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.63540569020021%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABN0lEQVQoz5WS65KCMAyF+/4vuP5aQaGUXrgoFPB2TOLUcVcddzvzTdIOPT1JUK7awHuNSq9v0F7rHLbeCM5uEXyJJmh0rflB2/ymgvI+IIQGbdsRPbSpsd8PxIgYJ8zzgongPE6zIGcURzobx0ikGKGMMSiKLaytsdvtUFuDvu8wxYjz+YzL5XLnL0vVdU0lairbk6s9nPNomoZeG8nFhMPhgOPxKPFR/B2qKAqwaAjh5pDyvu/fOvgomOe5OOTSWYwju2WHSeDTevxGfa1WyLIMLGytFYZhoMbP0sNPPDlcZ9/iiPvGJTvnaNrtvXd86XQ6SZ5igvdPQ+EeVlUloizIJbM4u1yWRYT54qt+vXKsDPWNy2TBrusk58gTToKvSJNPMSH/YVmWIsSTZmGeMrtkYX71P+sKCBhUnh3QnIcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"success response\"\n        title=\"success response\"\n        src=\"/static/dc6e1336047dfeca3345162f3137de07/799d3/success-response.png\"\n        srcset=\"/static/dc6e1336047dfeca3345162f3137de07/00d96/success-response.png 148w,\n/static/dc6e1336047dfeca3345162f3137de07/0b23c/success-response.png 295w,\n/static/dc6e1336047dfeca3345162f3137de07/799d3/success-response.png 590w,\n/static/dc6e1336047dfeca3345162f3137de07/2a3d6/success-response.png 885w,\n/static/dc6e1336047dfeca3345162f3137de07/ae92f/success-response.png 1180w,\n/static/dc6e1336047dfeca3345162f3137de07/30a34/success-response.png 1898w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>总结</h3>\n<p>虽然说这么做会有损微博的利益，但是我们也从中学到了一些处理请求转发的小技巧。\n正所谓道高一尺魔高一丈，正是有了互联网的攻防才能促进我们的行业更加安全，更能保障用户的权益。</p>","frontmatter":{"title":"如何绕过图片防盗链的校验","date":"April 27, 2020","description":"本文从实际出发尝试提供一种绕过图片防盗链校验的小技巧"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"tags":["Express","Referer ACL"],"slug":"/load-image-denied-solution/","previous":{"excerpt":"","fields":{"slug":"/plugin-mechanism/"},"frontmatter":{"date":"May 12, 2020","description":"前端工具如今基本都提供了插件机制，尤其以webpack著称，那么这种机制是如何实现的呢？","title":"前端插件机制的探索","tags":["plugin mechanism"]}},"next":{"excerpt":"前言 当我们需要 React 服务端渲染时，需要了解  这个对象。它能够使组件渲染成静态的 html 标记。 ReactDOMServer 提供了四个方法，其中  和  可以在浏览器和 node 环境中运行， 和  由于使用了 node 中特有的 stream…","fields":{"slug":"/getting-started-react-dom-server-render/"},"frontmatter":{"date":"April 17, 2020","description":"了解 React DOM 服务端渲染过程，以 renderToString 函数为例了解整个执行逻辑","title":"入门 React DOM 服务端渲染","tags":["React DOM","Server Render"]}}}}}